{% extends 'admin/base.html.twig' %}

{% block title %}Dashboard - Administration
{% endblock %}

{% block admin_content %}
	<div class="mb-8">
		<h1 class="text-4xl text-gray-900 mb-2">Dashboard</h1>
		<p class="text-gray-600">Vue d'ensemble de la plateforme</p>
	</div>

	<!-- Statistiques -->
	<div
		class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8">
		<!-- Carte Utilisateurs -->
		<div class="card-padded overflow-hidden relative">
			<div class="relative z-10">
				<p class="text-sm text-gray-600 mb-2">Utilisateurs</p>
				<p class="text-4xl font-bold mb-1 text-primary">{{ stats.users.total }}</p>
				<p class="text-xs text-gray-500">{{ stats.users.active }}
					actifs</p>
			</div>
			<svg class="absolute bottom-0 right-0 w-20 h-20 opacity-20 -mr-4 -mb-4 text-primary" fill="none" stroke="currentColor" viewbox="0 0 24 24">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
			</svg>
		</div>

		<!-- Carte Défis -->
		<div class="card-padded overflow-hidden relative">
			<div class="relative z-10">
				<p class="text-sm text-gray-600 mb-2">Criminels</p>
				<p class="text-4xl font-bold mb-1 text-accent">{{ stats.criminals.total }}</p>
				<p class="text-xs text-gray-500">{{ stats.criminals.capture }}
					actifs</p>
			</div>
			<svg class="absolute bottom-0 right-0 w-20 h-20 opacity-20 -mr-4 -mb-4 text-accent" fill="none" stroke="currentColor" viewbox="0 0 24 24">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V7a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
			</svg>
		</div>

		<!-- Carte Reports -->
		<div class="card-padded overflow-hidden relative">
			<div class="relative z-10">
				<p class="text-sm text-gray-600 mb-2">Signalements</p>
				<p class="text-4xl font-bold mb-1 text-error">-</p>
				<p class="text-xs text-gray-500">-- actifs</p>
			</div>
			<svg class="absolute bottom-0 right-0 w-20 h-20 opacity-20 -mr-4 -mb-4 text-error" fill="none" stroke="currentColor" viewbox="0 0 24 24">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
			</svg>
		</div>
	</div>


	<!-- Derniers Criminels -->
	<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
		<div class="card-padded">
			<div class="flex items-center justify-between mb-6">
				<h2 class="text-2xl text-gray-900">Derniers criminels</h2>
				<a href="#" class="link-nav text-sm">Voir tout</a>
			</div>

			<div class="space-y-4">
				{% if recentCriminals|length > 0 %}
					{% for criminal in recentCriminals %}
						<div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
							<div class="flex-1">
								<h3 class="font-medium text-gray-900 mb-1">
									<a href="#" class="hover:underline">
										{{ criminal.name }}
									</a>
								</h3>
								<p class="text-sm text-gray-600">
									{{ criminal.createdAt|date('d/m/Y') }}</p>
							</div>
							{% if not criminal.isCaptured %}
								<span class="badge-category-sm text-error bg-error-light">
									Inactif
								</span>
							{% endif %}
						</div>
					{% endfor %}
				{% else %}
					<p class="text-gray-600 text-center py-4">Aucun défi récent</p>
				{% endif %}
			</div>
		</div>

		<div class="card-padded">
			<div class="flex items-center justify-between mb-6">
				<h2 class="text-2xl text-gray-900">Derniers utilisateurs</h2>
				<a href="#" class="link-nav text-sm">Voir tout</a>
			</div>
			<div class="space-y-4">
				{% if recentUsers|length > 0 %}
					{% for user in recentUsers %}
						<div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
							<div class="flex items-center space-x-3">

								<div class="w-10 h-10 rounded-full flex items-center justify-center text-sm text-primary bg-primary-light">
									{{ user.name|slice(0, 1)|upper }}
								</div>

								<div>
									<p class="font-medium text-gray-900">{{ user.name }}</p>
									<p class="text-sm text-gray-600">{{ user.email }}</p>
								</div>
							</div>
							{% if not user.isActive %}
								<span class="badge-category-sm  text-error bg-error-light">
									Inactif
								</span>
							{% endif %}
						</div>
					{% endfor %}
				{% else %}
					<p class="text-gray-600 text-center py-4">Aucun utilisateur récent</p>
				{% endif %}
			</div>
		</div>
	</div>
{% endblock %}
