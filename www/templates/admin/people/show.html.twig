{% extends 'admin/base.html.twig' %}

{% block title %}People
{% endblock %}

{% block admin_content %}
	<div class="mb-8">
		<a href="{{ path('app_admin_people') }}" class="link-nav mb-4 inline-block">
			← Retour à la liste
		</a>
		<h1 class="text-4xl text-gray-900 mb-2">{{ people.lastname }}
			{{ people.name}}</h1>
		<p class="text-gray-600">
			{{ people.createdAt|date('d/m/Y à H:i') }}
		</p>
	</div>

	<div
		class="grid grid-cols-1 lg:grid-cols-3 gap-6">
		<!-- Informations -->
		<div class="lg:col-span-2 flex gap-2">
			<div class="card-padded w-56 h-auto flex flex-col justify-center">
				<h2 class="text-2xl text-gray-900 mb-8">Informations</h2>
				<dl class="space-y-4">
					<div>
						<dt class="text-sm font-medium text-gray-500">Sexe</dt>
						<dd class="mt-1 text-sm text-gray-900">{{ people.gender ? people.gender.label : '—' }}</dd>
					</div>
					<div>
						<dt class="text-sm font-medium text-gray-500">Couleur de peau :</dt>
						<dd class="mt-1 text-sm text-gray-900 whitespace-pre-line">{{ people.skinColor ? people.skinColor.label : '—' }}</dd>
					</div>
					<div>
						<dt class="text-sm font-medium text-gray-500">Date de naissance :</dt>
						<dd class="mt-1 text-sm text-gray-900 whitespace-pre-line">{{ people.birthDate|date('d/m/Y') }}</dd>
					</div>
					<div>
						<dt class="text-sm font-medium text-gray-500">Lieu de naissance :</dt>
						<dd class="mt-1 text-sm text-gray-900 whitespace-pre-line">{{ people.birthPlace }}</dd>
					</div>

					<div>
						<dt class="text-sm font-medium text-gray-500">Nationalité(s) :</dt>
						<dd class="mt-1 text-sm text-gray-900">
							{% if people.nationalities|length > 0 %}
								<ul class="space-y-0">
									{% for nationality in people.nationalities %}
										<li>{{ nationality.label }}{{ not loop.last ? ',' : '' }}</li>
									{% endfor %}
								</ul>
							{% else %}
								—
							{% endif %}
						</dd>
					</div>
				</dl>
			</div>

			<div class="flex flex-col gap-2 flex-1">
				<div class="card-padded">
					<h2 class="text-2xl text-gray-900 mb-4">Signalement</h2>
					<div class="grid grid-cols-1 sm:grid-cols-2 gap-4 items-start">
						<div class="flex items-start gap-4">
							<svg class="h-12 w-12" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewbox="0 0 24 24">
								<g fill="none"><path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"/><path fill="currentColor" d="M12 3a9 9 0 0 0-9 9v6a3 3 0 0 0 3 3h1.382a2 2 0 0 0 1.789-1.106l.175-.35a6.6 6.6 0 0 1-.904-.76C7.343 17.678 6.5 16.054 6.5 14c0-.735.124-1.466.349-2.157c.1-.307.377-.343.651-.343c1.69 0 3.185-.839 4.091-2.125a.5.5 0 0 1 .818 0A5 5 0 0 0 16.5 11.5c.274 0 .552.036.651.343A7 7 0 0 1 17.5 14c0 2.055-.843 3.678-1.942 4.784c-.285.287-.59.541-.904.76l.175.35A2 2 0 0 0 16.618 21H18a3 3 0 0 0 3-3v-6a9 9 0 0 0-9-9"/></g>
							</svg>
							<div class="flex flex-col">
								<dt class="text-sm font-medium text-gray-500">Couleur des cheveux :</dt>
								<dd class="mt-1 text-sm text-gray-900 whitespace-pre-line">{{ people.hairColor ? people.hairColor.label : '—' }}</dd>

							</div>
						</div>

						<div class="flex items-start gap-4">
							<svg class="h-12 w-12" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewbox="0 0 24 24"><path fill="currentColor" d="M12 9a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5c-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0a9.821 9.821 0 0 0-17.64 0"/></svg>

							<div class="flex flex-col">
								<dt class="text-sm font-medium text-gray-500">Couleur des yeux :</dt>
								<dd class="mt-1 text-sm text-gray-900 whitespace-pre-line">{{ people.eyesColor ? people.eyesColor.label : '—' }}</dd>

							</div>
						</div>

						<div class="flex items-start gap-4 sm:col-start-2 sm:row-start-1">
							<svg class="h-12 w-12" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewbox="0 0 20 20"><path fill="currentColor" d="M14 3.5A1.5 1.5 0 0 0 12.5 2h-5A1.5 1.5 0 0 0 6 3.5v13A1.5 1.5 0 0 0 7.5 18h5a1.5 1.5 0 0 0 1.5-1.5zm-7 9.504h2.5a.5.5 0 0 0 0-1H7V10.5h1.5a.5.5 0 0 0 0-1H7V8h2.5a.5.5 0 0 0 0-1H7V5.5h1.5a.5.5 0 0 0 0-1H7v-1a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-1h1.5a.5.5 0 0 0 0-1H7z"/></svg>

							<div class="flex flex-col">
								<dt class="text-sm font-medium text-gray-500">Taille :</dt>
								<dd class="mt-1 text-sm text-gray-900 whitespace-pre-line">{{ people.height ? (people.height / 100)|number_format(2, ',', ' ') : '—' }}
									mètres</dd>
							</div>
						</div>

						<div class="flex items-start gap-4 sm:col-start-2 sm:row-start-2">
							<svg class="w-12 h-12" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewbox="0 0 24 24"><path fill="currentColor" d="M6.712 19h10.577q.269 0 .461-.221t.154-.49l-1.252-8.77q-.039-.23-.212-.375Q16.267 9 16.036 9H7.963q-.23 0-.404.144q-.173.144-.211.375l-1.252 8.77q-.038.269.154.49t.461.221M12 8q.425 0 .713-.288T13 7t-.288-.712T12 6t-.712.288T11 7t.288.713T12 8m1.71 0h2.346q.615 0 1.06.394q.444.394.53 1.004l1.252 8.77q.106.726-.376 1.279q-.481.553-1.233.553H6.711q-.752 0-1.234-.553t-.376-1.28l1.252-8.769q.087-.61.53-1.004Q7.33 8 7.945 8h2.347q-.133-.212-.212-.468Q10 7.275 10 7q0-.846.577-1.423T12 5t1.423.577T14 7q0 .275-.079.532q-.079.256-.211.468M6.038 19h11.924z"/></svg>

							<div class="flex flex-col">
								<dt class="text-sm font-medium text-gray-500">Poids :</dt>
								<dd class="mt-1 text-sm text-gray-900 whitespace-pre-line">{{ people.height }}
									kg</dd>
							</div>
						</div>

					</div>
				</div>

				<!-- Médias -->
				{% if people.media|length > 0 %}
					<div class="card-padded">
						<h2 class="text-2xl text-gray-900 mb-4">Fichiers</h2>
						<div class="grid grid-cols-2 md:grid-cols-3 gap-4">
							{% for media in people.media %}
								{% if media.path matches '/\\.(jpg|jpeg|png|gif|webp|svg)$/i' %}
									<img src="{{ media.path }}" alt="Média {{ loop.index }}" class="w-full h-32 object-cover rounded-lg border border-gray-200">
								{% else %}
									<div class="w-full h-32 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center">
										<svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
										</svg>
									</div>
								{% endif %}
							{% endfor %}
						</div>
					</div>
				{% endif %}
			</div>
		</div>

		<!-- Actions -->
		<div class="space-y-6">
			<div class="card-padded">
				<h2 class="text-2xl text-gray-900 mb-4">Actions</h2>
				<div class="space-y-3">
					<a href="{{ path(people.type == 'Criminel' ? 'app_criminal_show' : 'app_missing_show', {id: people.id}) }}" class="btn-secondary w-full" target="_blank">
						Voir sur le site
					</a>
					<form method="post" action="{{ path('app_people_delete', { id: people.id }) }}" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer ce défi ?');">
						<input type="hidden" name="_token" value="{{ csrf_token('delete_people_' ~ people.id) }}">
						<button type="submit" class="btn-danger w-full">Supprimer le défi</button>
					</form>
				</div>
			</div>
		</div>

	</div>
{% endblock %}
