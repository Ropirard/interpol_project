{% extends 'base.html.twig' %}

{% block body %}
	<div
		class="min-h-screen bg-main">
		<!-- Navigation admin -->
		<nav class="bg-white border-b border-gray-200 shadow-sm">
			<div class="container-main">
				<div class="flex items-center justify-between h-16">
					<div class="flex items-center space-x-8">
					<a href="{{ is_granted('ROLE_ADMIN') ? path('app_admin_dashboard') : (is_granted('ROLE_MODERATOR') ? path('app_admin_comment') : path('app_admin_article_redactor')) }}" class="flex items-center space-x-2">
						<svg class="w-6 h-6" style="color: var(--color-accent);" fill="none" stroke="currentColor" viewbox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
						</svg>
						<span class="font-bold text-lg" style="color: var(--color-accent);">
							{% if is_granted('ROLE_ADMIN') %}
								Administration
							{% elseif is_granted('ROLE_MODERATOR') %}
								Modération des Commentaires
							{% else %}
								Gestion des Articles
							{% endif %}
						</span>
					</a>
						<div class="hidden md:flex space-x-4">
							{% set currentRoute = app.request.attributes.get('_route') %}
							{% if is_granted('ROLE_ADMIN') %}
								<a href="{{ path('app_admin_dashboard') }}" class="px-3 py-2 rounded-md text-sm font-medium transition-colors {{ currentRoute == 'app_admin_dashboard' ? 'text-white' : 'text-gray-700 hover:text-gray-900' }}" style="{{ currentRoute == 'app_admin_dashboard' ? 'background-color: var(--color-primary);' : '' }}">
									Dashboard
								</a>
								<a href="{{ path('app_admin_user') }}" class="px-3 py-2 rounded-md text-sm font-medium transition-colors {{ currentRoute starts with 'app_admin_user' ? 'text-white' : 'text-gray-700 hover:text-gray-900' }}" style="{{ currentRoute starts with 'app_admin_user' ? 'background-color: var(--color-primary);' : '' }}">
									Utilisateurs
								</a>
								<a href="{{ path('app_admin_people') }}" class="px-3 py-2 rounded-md text-sm font-medium transition-colors {{ currentRoute starts with 'app_admin_people' ? 'text-white' : 'text-gray-700 hover:text-gray-900' }}" style="{{ currentRoute starts with 'app_admin_people' ? 'background-color: var(--color-primary);' : '' }}">
									Personnes recherchées
								</a>
							{% endif %}
							{% if is_granted('ROLE_ADMIN') or is_granted('ROLE_REDACTOR') %}
								<a href="{{ is_granted('ROLE_ADMIN') ? path('app_admin_article') : path('app_admin_article_redactor') }}" class="px-3 py-2 rounded-md text-sm font-medium transition-colors {{ currentRoute starts with 'app_admin_article' ? 'text-white' : 'text-gray-700 hover:text-gray-900' }}" style="{{ currentRoute starts with 'app_admin_article' ? 'background-color: var(--color-primary);' : '' }}">
									Articles
								</a>
							{% endif %}
							{% if is_granted('ROLE_ADMIN') %}
								<a href="{{ path('app_admin_report') }}" class="px-3 py-2 rounded-md text-sm font-medium transition-colors {{ currentRoute starts with 'app_admin_report' ? 'text-white' : 'text-gray-700 hover:text-gray-900' }}" style="{{ currentRoute starts with 'app_admin_report' ? 'background-color: var(--color-primary);' : '' }}">
									Signalements
								</a>
								<a href="{{ path('app_admin_comment') }}" class="px-3 py-2 rounded-md text-sm font-medium transition-colors {{ currentRoute starts with 'app_admin_comment' ? 'text-white' : 'text-gray-700 hover:text-gray-900' }}" style="{{ currentRoute starts with 'app_admin_comment' ? 'background-color: var(--color-primary);' : '' }}">
									Commentaires
								</a>
								<a href="{{ path('app_admin_caracteristic') }}" class="px-3 py-2 rounded-md text-sm font-medium transition-colors {{ currentRoute == 'app_admin_caracteristic' ? 'text-white' : 'text-gray-700 hover:text-gray-900' }}" style="{{ currentRoute == 'app_admin_caracteristic' ? 'background-color: var(--color-primary);' : '' }}">
									Caracteristiques
								</a>
							{% elseif is_granted('ROLE_REDACTOR') %}
								{# Aucun menu supplémentaire pour les rédacteurs #}
							{% elseif is_granted('ROLE_MODERATOR') %}
								<a href="{{ path('app_admin_comment') }}" class="px-3 py-2 rounded-md text-sm font-medium transition-colors {{ currentRoute starts with 'app_admin_comment' ? 'text-white' : 'text-gray-700 hover:text-gray-900' }}" style="{{ currentRoute starts with 'app_admin_comment' ? 'background-color: var(--color-primary);' : '' }}">
									Commentaires
								</a>
							{% endif %}
						</div>
					</div>
					<div class="flex items-center space-x-4">
						<a href="{{ path('app_home') }}" class="text-sm text-gray-600 hover:text-gray-900">
							Retour au site
						</a>
					</div>
				</div>
			</div>
		</nav>

		<!-- Contenu -->
		<div class="section">
			<div class="container-main">
				{% for label, messages in app.flashes %}
					{% for message in messages %}
						<div class="mb-6 alert-{{ label == 'error' ? 'error' : 'success' }}">
							{{ message }}
						</div>
					{% endfor %}
				{% endfor %}

				{% block admin_content %}{% endblock %}
			</div>
		</div>
	</div>
{% endblock %}
