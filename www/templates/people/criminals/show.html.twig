{% extends 'base.html.twig' %}

{% block title %}
	{{ people.lastname }} {{ people.name }}
	- Interpol
{% endblock %}

{% block body %}
	<div class="min-h-screen bg-main py-8">
		<div class="container-main">
			{% include "partials/_messages.html.twig" %}

			{# Bouton retour #}
			<div class="w-full mx-auto mb-6" style="max-width: 52rem;">
				<a class="link-nav inline-flex items-center" href="{{ path('app_criminal_index') }}">
					<svg class="icon-sm mr-2" fill="none" stroke="currentColor" viewbox="0 0 24 24" stroke-width="2">
						<path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path>
					</svg>
					<span>Retour aux criminels</span>
				</a>
			</div>
			{# carte principale du criminel #}
			<div
				class="card overflow-hidden mb-8 w-full mx-auto"
				style="max-width: 52rem; background: linear-gradient(180deg, #dc2626 0, #dc2626 9rem, #ffffff 9rem);">
				<div class="px-6 pt-8 pb-6">
					<div class="flex flex-col md:flex-row gap-6 items-start">
						<div class="w-full md:w-1/2">
							{# image #}
							{% if people.media|length > 0 %}
								{% set mainMedia = people.media|first %}
								<div class="grid grid-cols-1 gap-4">
									<div class="relative group w-full">
										<img src="{{ mainMedia.path }}" alt="Média principal" class="w-full max-w-sm min-w-[16rem] mx-auto h-114 object-cover rounded-lg border border-gray-200">
									</div>
									{% if people.media|length > 1 %}
										<div class="grid grid-cols-2 gap-3 pt-2 max-w-sm mx-auto">
											{% for media in people.media|slice(1) %}
												<img src="{{ media.path }}" alt="Média {{ loop.index + 1 }}" class="w-full aspect-square object-cover rounded-md border border-gray-200">
											{% endfor %}
										</div>
									{% endif %}
									<div class="mt-6 text-xl text-gray-900 flex items-center justify-center gap-6">
										<span class="text-semibold">Status :</span>
										<span class="{{ people.isCaptured ? 'badge-captured' : 'badge-researched' }}">{{ people.isCaptured ? 'Capturé' : 'Recherché' }}</span>
									</div>
								</div>
							{% else %}
								<div class="grid grid-cols-1 gap-4">
									<img class="w-full max-w-sm min-w-[16rem] mx-auto h-114 object-cover rounded-lg border border-gray-200" src="{{ asset('images/nopicture.png') }}" alt="{{ people.lastname }} {{ people.name }}">
									<div class="mt-6 text-xl text-gray-900 flex items-center justify-center gap-6">
										<span class="text-semibold">Status :</span>
										<span class="{{ people.isCaptured ? 'badge-captured' : 'badge-researched' }}">{{ people.isCaptured ? 'Capturé' : 'Recherché' }}</span>
									</div>
								</div>
							{% endif %}
						</div>
						<div class="w-full md:w-1/2">
							<h1 class="text-4xl text-white mb-4">{{ people.lastname }}, {{ people.name }}</h1>
							<h2 class="text-xl text-white mb-4">Recherché{{ people.gender and people.gender.label == 'Femme' ? 'e' : ''}} par : <strong>{{ people.researchBy }}</strong></h2>
							<div class="h-10"></div>
							<h1 class="text-3xl text-gray-900 mb-8">Elements d'identification</h1>
							<div class="flex">
								<div class="space-y-2 w-56 pr-6">
									<p class="text-gray-700">Nom de famille</p>
									<p class="text-gray-700">Prénom</p>
									<p class="text-gray-700">Sexe</p>
									<p class="text-gray-700">Couleur de peau</p>
										<p class="text-gray-700">Date de naissance</p>
										<span class="block text-xs leading-3 text-gray-400">&nbsp;</span>
									<p class="text-gray-700">Lieu de naissance</p>
									<p class="text-gray-700">Nationalité</p>
								</div>
									<div class="space-y-2" style="margin-left: 0;">
									<p class="font-semibold">{{ people.lastname }}</p>
									<p class="font-semibold">{{ people.name }}</p>
									<p class="font-semibold">{{ people.gender ? people.gender.label : '—' }}</p>
									<p class="font-semibold">{{ people.skinColor ? people.skinColor.label : '—' }}</p>
										<p class="font-semibold">
											{% if people.birthDate %}
												{{ people.birthDate|date('d/m/Y') }}
												<span class="block text-sm text-semibold">
													{{ (date('now')|date('Y') - people.birthDate|date('Y')) - (date('now')|date('md') < people.birthDate|date('md') ? 1 : 0) }} ans
												</span>
											{% else %}
												—
											{% endif %}
										</p>
									<p class="font-semibold">{{ people.birthPlace }}</p>
									<p class="font-semibold">{% if people.nationalities|length > 0 %}
										{% for nationality in people.nationalities %}
											{{ nationality.label }}{{ not loop.last ? ', ' : '' }}
										{% endfor %}
									{% else %}
										—
									{% endif %}</p>
								</div>
							</div>

							<h1 class="text-3xl text-gray-900 mt-6 mb-8">Signalement</h1>
							<div class="flex">
								<div class="space-y-2 w-56 pr-6">
									<p class="text-gray-700">Couleur des cheveux</p>
									<p class="text-gray-700">Couleur des yeux</p>
									<p class="text-gray-700">Taille</p>
									<p class="text-gray-700">Poids</p>

								</div>
									<div class="space-y-2" style="margin-left: 0;">
									<p class="font-semibold">{{ people.hairColor ? people.hairColor.label : '—' }}</p>
									<p class="font-semibold">{{ people.eyesColor ? people.eyesColor.label : '—' }}</p>
										<p class="font-semibold">{{ people.height ? (people.height / 100)|number_format(2, ',', ' ') : '—' }} mètres</p>
									<p class="font-semibold">{{ people.weight ? people.weight : '—' }} kg</p>
								</div>
							</div>

							<h1 class="text-3xl text-gray-900 mt-6 mb-8">Détails</h1>
							<div class="flex">
								<div class="space-y-2 w-56 pr-6">
									<p class="text-gray-700">Langue(s) parlée(s)</p>
								</div>
									<div class="space-y-2" style="margin-left: 0;">
									<p class="font-semibold">
										{% if people.spokenLangages|length > 0 %}
											{% for language in people.spokenLangages %}
														{{ not loop.first ? ',<br>' : '' }}{{ language.label }}
											{% endfor %}
										{% else %}
											—
										{% endif %}
									</p>
								</div>
							</div>

							<h1 class="text-3xl text-gray-900 mt-6 mb-8">Qualification de l'infraction ou des infractions</h1>
							<p class="font-semibold mb-8">
							{% if people.charges|length > 0 %}
											{% for charge in people.charges %}
												{{ charge.label }}{{ not loop.last ? ', ' : '' }}
											{% endfor %}
										{% else %}
											—
										{% endif %}
							</p>

							<div class="flex items-center justify-between">
								{% if app.user and (is_granted('ROLE_ADMIN')) %}
									<div class="flex gap-2">
										<a class="btn-secondary flex items-center space-x-2" href="{{ path('app_criminal_edit', {id: people.id}) }}">
											<svg class="icon-with-text" fill="none" stroke="currentColor" viewbox="0 0 24 24" stroke-width="2">
												<path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
											</svg>
											<span>Modifier</span>
										</a>
									</div>
								{% endif %}
							</div>
						</div>
					</div>
				</div>
			</div>
			</div>
		</div>
	</div>
{% endblock %}